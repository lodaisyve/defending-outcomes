
  title: class-level model

  data: file = t2t3.dat;

 VARIABLE:
  NAMES =  newid clasid clasiz prog
    massd maggd mcomv mrepo mtacd
    mpop mlika
    t2age gender
    t2assd t2aggd t2comv t2repo t2tacd
    t2likp t2popp
    t2vic  t2dep
    t3vic  t3dep
    t2bu_po
    ;

 

USEVARIABLES =  
 clasiz prog t2age gender 
  t2assd t2aggd t2comv t2repo t2tacd
  t2likp t2popp t2vic t3vic t2dep t3dep
  t2bu_po;

!missing = all (999);
CLUSTER = clasid;

WITHIN = t2age gender 
t2assd t2aggd t2comv t2repo t2tacd
t2likp t2popp t2vic t2dep;
   
BETWEEN =t2bu_po;

DEFINE: CENTER t2age gender 
  t2assd t2aggd t2comv t2repo t2tacd
  t2likp t2popp t2vic t2dep (GROUPMEAN);

center  t2bu_po  (grandmean);




ANALYSIS:   TYPE = TWOLEVEL random;
  ESTIMATOR = BAYES;
  BITERATIONS = 50000(10000);
  THIN = 20;
  PROCESSORS = 2;
  CHAINS = 3;
  ALGORITHM=GIBBS(RW);
        

  model: 
  %within%
  t3vic  ON t2age gender 
  t2aggd t2comv t2repo t2tacd
  t2likp t2popp t2vic t2dep;
  
 t3dep ON t2age gender 
 t2aggd t2comv t2repo t2tacd
 t2likp t2popp t2vic t2dep;

t3vic t3dep;

t2vic WITH t2dep;

s1|t3vic ON t2assd;
s2|t3dep ON t2assd;


         %between%
         t3vic ON t2bu_po ;
         
         t3dep ON
      
         t2bu_po;
         
  
        s1;
        s2;
       


 
 s1 on  t2bu_po;
 
 s2 on 
  t2bu_po;
       
    

        
        
         
         [t3vic] ;

         t3vic;
        [t3dep] ;
         t3dep;
       
         [s1] ;
         [s2] ;
         
  PLOT:       TYPE = PLOT2;

  OUTPUT:     STDYX SVALUES;
  TECH1 TECH8;
